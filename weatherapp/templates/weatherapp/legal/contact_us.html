{% extends 'weatherapp/base.html' %}
{% block title %}Contact Us - Climascope{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="glass-card p-5">
                <h1 class="mb-4 text-center"><i class="fas fa-envelope me-3"></i>Contact Us</h1>
                <p class="text-center text-muted mb-5">Get in touch with our team. We're here to help!</p>
                
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} alert-dismissible fade show">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>
                    {% endfor %}
                {% endif %}
                
                <div class="row mb-5">
                    <div class="col-md-4 text-center mb-4">
                        <div class="contact-method">
                            <i class="fas fa-envelope-open contact-icon"></i>
                            <h5>Email Support</h5>
                            <p class="text-muted">support@climascope.com</p>
                            <small>Response within 24 hours</small>
                        </div>
                    </div>
                    <div class="col-md-4 text-center mb-4">
                        <div class="contact-method">
                            <i class="fas fa-phone contact-icon"></i>
                            <h5>Phone Support</h5>
                            <p class="text-muted">+1 (555) 123-WEATHER</p>
                            <small>Mon-Fri, 9 AM - 6 PM EST</small>
                        </div>
                    </div>
                    <div class="col-md-4 text-center mb-4">
                        <div class="contact-method">
                            <i class="fas fa-map-marker-alt contact-icon"></i>
                            <h5>Office Address</h5>
                            <p class="text-muted">123 Weather Street<br>Climate City, CC 12345</p>
                            <small>By appointment only</small>
                        </div>
                    </div>
                </div>
                
                <div class="contact-form-section">
                    <h3 class="mb-4 text-center">Send us a Message</h3>
                    
                    <form method="POST" class="contact-form">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="name" class="form-label">Full Name *</label>
                                <input type="text" class="form-control" id="name" name="name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">Email Address *</label>
                                <input type="email" class="form-control" id="email" name="email" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="subject" class="form-label">Subject *</label>
                            <select class="form-select" id="subject" name="subject" required>
                                <option value="">Choose a topic...</option>
                                <option value="General Inquiry">General Inquiry</option>
                                <option value="Technical Support">Technical Support</option>
                                <option value="Bug Report">Bug Report</option>
                                <option value="Feature Request">Feature Request</option>
                                <option value="Account Issues">Account Issues</option>
                                <option value="Privacy Concerns">Privacy Concerns</option>
                                <option value="Business Partnership">Business Partnership</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        
                        <div class="mb-4">
                            <label for="message" class="form-label">Message *</label>
                            <textarea class="form-control" id="message" name="message" rows="6" 
                                    placeholder="Please describe your inquiry in detail..." required></textarea>
                            <div class="form-text">Minimum 20 characters required</div>
                        </div>
                        
                        <div class="mb-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="consent" name="consent" required>
                                <label class="form-check-label" for="consent">
                                    I agree to the <a href="{% url 'privacy_policy' %}" target="_blank">Privacy Policy</a> 
                                    and consent to the collection and processing of my personal data. *
                                </label>
                            </div>
                        </div>
                        
                        <div class="text-center">
                            <button type="submit" class="btn btn-primary-custom">
                                <i class="fas fa-paper-plane me-2"></i>Send Message
                            </button>
                        </div>
                    </form>
                </div>
                
                <hr class="my-5">
                
                <div class="faq-section">
                    <h3 class="mb-4 text-center">Frequently Asked Questions</h3>
                    
                    <div class="accordion" id="faqAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="faq1">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                        data-bs-target="#collapse1" aria-expanded="false" aria-controls="collapse1">
                                    How accurate are the weather forecasts?
                                </button>
                            </h2>
                            <div id="collapse1" class="accordion-collapse collapse" aria-labelledby="faq1" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Our weather data comes from reliable meteorological sources including OpenWeatherMap. 
                                    While we strive for accuracy, weather forecasting is inherently uncertain and should be 
                                    used as guidance rather than absolute fact. For critical decisions, always consult official weather services.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="faq2">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                        data-bs-target="#collapse2" aria-expanded="false" aria-controls="collapse2">
                                    Why am I not receiving weather alerts?
                                </button>
                            </h2>
                            <div id="collapse2" class="accordion-collapse collapse" aria-labelledby="faq2" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Make sure you have: 1) Verified your email address, 2) Enabled notifications in your settings, 
                                    3) Added cities to your favorites list, 4) Set appropriate alert thresholds. Check your spam 
                                    folder if you're still not receiving emails.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="faq3">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                        data-bs-target="#collapse3" aria-expanded="false" aria-controls="collapse3">
                                    Is my personal data secure?
                                </button>
                            </h2>
                            <div id="collapse3" class="accordion-collapse collapse" aria-labelledby="faq3" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Yes, we take data security seriously. We use encryption, secure authentication, and follow 
                                    best practices for data protection. Review our <a href="{% url 'privacy_policy' %}">Privacy Policy</a> 
                                    for detailed information about how we protect and use your data.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="faq4">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                        data-bs-target="#collapse4" aria-expanded="false" aria-controls="collapse4">
                                    How can I delete my account?
                                </button>
                            </h2>
                            <div id="collapse4" class="accordion-collapse collapse" aria-labelledby="faq4" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    You can deactivate or permanently delete your account from the Settings page. 
                                    Deactivation is reversible, while deletion is permanent and cannot be undone. 
                                    All your data will be removed upon permanent deletion.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="faq5">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                        data-bs-target="#collapse5" aria-expanded="false" aria-controls="collapse5">
                                    Can I suggest new features?
                                </button>
                            </h2>
                            <div id="collapse5" class="accordion-collapse collapse" aria-labelledby="faq5" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Absolutely! We love hearing from our users. Use the contact form above with "Feature Request" 
                                    as the subject, or send us an email directly. We review all suggestions and consider them 
                                    for future updates.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.glass-card {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

.contact-method {
    padding: 2rem 1rem;
    border-radius: 15px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
}

.contact-method:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-5px);
}

.contact-icon {
    font-size: 2.5rem;
    color: #4dabf7;
    margin-bottom: 1rem;
}

.contact-method h5 {
    color: white;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.form-control, .form-select {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 10px;
    color: white;
    padding: 0.75rem 1rem;
}

.form-control::placeholder {
    color: rgba(255, 255, 255, 0.7);
}

.form-control:focus, .form-select:focus {
    background: rgba(255, 255, 255, 0.15);
    border-color: #4dabf7;
    color: white;
    box-shadow: 0 0 0 0.25rem rgba(77, 171, 247, 0.25);
}

.form-select option {
    background: #333;
    color: white;
}

.form-label {
    color: rgba(255, 255, 255, 0.9);
    font-weight: 500;
    margin-bottom: 0.5rem;
}

.form-text {
    color: rgba(255, 255, 255, 0.7);
}

.form-check-input {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.3);
}

.form-check-input:checked {
    background-color: #4dabf7;
    border-color: #4dabf7;
}

.form-check-label {
    color: rgba(255, 255, 255, 0.9);
}

.btn-primary-custom {
    background: linear-gradient(135deg, #4dabf7 0%, #1b345e 100%);
    border: none;
    padding: 0.75rem 2rem;
    border-radius: 25px;
    font-weight: 600;
    color: white;
    transition: all 0.3s ease;
}

.btn-primary-custom:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(77, 171, 247, 0.4);
    color: white;
}

.accordion-item {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px !important;
    margin-bottom: 1rem;
    overflow: hidden;
}

.accordion-button {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border: none;
    font-weight: 500;
}

.accordion-button:not(.collapsed) {
    background: rgba(77, 171, 247, 0.2);
    color: white;
}

.accordion-button:focus {
    box-shadow: none;
    border-color: rgba(77, 171, 247, 0.5);
}

.accordion-body {
    background: rgba(255, 255, 255, 0.05);
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
}

.accordion-body a {
    color: #4dabf7;
}

.alert {
    background: rgba(77, 171, 247, 0.1);
    border: 1px solid rgba(77, 171, 247, 0.3);
    color: rgba(255, 255, 255, 0.9);
}

.alert-success {
    background: rgba(40, 167, 69, 0.1);
    border-color: rgba(40, 167, 69, 0.3);
}

hr {
    border-color: rgba(255, 255, 255, 0.2);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('.contact-form');
    const messageField = document.getElementById('message');
    
    // Form validation
    form.addEventListener('submit', function(e) {
        const message = messageField.value.trim();
        
        if (message.length < 20) {
            e.preventDefault();
            alert('Please provide a more detailed message (at least 20 characters).');
            messageField.focus();
        }
    });
    
    // Character counter for message field
    const charCounter = document.createElement('div');
    charCounter.className = 'form-text';
    charCounter.style.textAlign = 'right';
    messageField.parentNode.appendChild(charCounter);
    
    messageField.addEventListener('input', function() {
        const length = this.value.length;
        charCounter.textContent = `${length} characters`;
        
        if (length < 20) {
            charCounter.style.color = 'rgba(220, 53, 69, 0.8)';
        } else {
            charCounter.style.color = 'rgba(40, 167, 69, 0.8)';
        }
    });
});
</script>
{% endblock %}